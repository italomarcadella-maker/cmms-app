(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55436,e=>{"use strict";let s=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>s],55436)},71689,e=>{"use strict";let s=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],71689)},34029,e=>{"use strict";var s=e.i(43476),r=e.i(71645),t=e.i(77183),d=e.i(7311),l=e.i(17360),i=e.i(81233),a=e.i(75254);let n=(0,a.default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),c=(0,a.default)("factory",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var o=e.i(71689),x=e.i(55436),m=e.i(47163),u=e.i(22016);function f({component:e}){let{attributes:r,listeners:l,setNodeRef:i,transform:a,isDragging:c}=(0,t.useDraggable)({id:e.id,data:{component:e}}),o={transform:d.CSS.Translate.toString(a),opacity:c?.5:1};return(0,s.jsxs)("div",{ref:i,style:o,...l,...r,className:"p-3 bg-card border rounded-lg shadow-sm mb-2 cursor-grab active:cursor-grabbing hover:border-primary transition-colors flex items-center gap-3 touch-none group",children:[(0,s.jsx)(n,{className:"h-4 w-4 text-muted-foreground group-hover:text-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-sm",children:e.code}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:e.model})]}),(0,s.jsx)("div",{className:"ml-auto text-xs bg-muted px-1.5 py-0.5 rounded text-muted-foreground",children:"RETINATO"===e.warehouse?"RET":"MAG"})]})}function h({asset:e,assignedComponents:r}){let{setNodeRef:d,isOver:l}=(0,t.useDroppable)({id:e.id,data:{asset:e}});return(0,s.jsxs)("div",{ref:d,className:(0,m.cn)("p-4 rounded-xl border transition-all duration-200",l?"bg-primary/10 border-primary shadow-md scale-[1.02]":"bg-card shadow-sm"),children:[(0,s.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2 bg-muted/50 rounded-lg text-muted-foreground",children:(0,s.jsx)(c,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-sm",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.line?(0,s.jsx)("span",{className:"font-medium text-primary block mb-0.5",children:e.line}):null,e.model," â€¢ ",e.location]})]})]}),(0,s.jsx)("div",{className:"space-y-2 min-h-[60px] bg-muted/20 rounded-lg p-2 border border-dashed border-transparent",children:0===r.length?(0,s.jsx)("div",{className:"h-full flex items-center justify-center text-xs text-muted-foreground italic",children:"Trascina qui viti/cilindri"}):r.map(e=>(0,s.jsx)(f,{component:e},e.id))})]})}function g(){let{components:e,assignComponent:d,moveWarehouse:a}=(0,l.useComponents)(),{assets:c}=(0,i.useAssets)(),[m,f]=(0,r.useState)(null),[g,j]=(0,r.useState)(""),b=c.filter(e=>e.name.toLowerCase().includes(g.toLowerCase())||e.model.toLowerCase().includes(g.toLowerCase())),v=e.filter(e=>!e.assignedAssetId),y=m?e.find(e=>e.id===m):null;return(0,s.jsxs)(t.DndContext,{onDragStart:e=>{f(e.active.id)},onDragEnd:s=>{let{active:r,over:t}=s;if(!t)return void f(null);let l=r.id,i=t.id;if("RETINATO"===i||"MAGLIATO"===i){d(l,void 0);let s=e.find(e=>e.id===l);s&&a(l,i,s.location)}else if(i!==l){let s=e.find(e=>e.id===l);if(!s)return;let r=e.filter(e=>e.assignedAssetId===i).find(e=>e.type===s.type);r&&d(r.id,void 0),d(l,i)}f(null)},children:[(0,s.jsxs)("div",{className:"space-y-6 h-[calc(100vh-100px)] flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 shrink-0",children:[(0,s.jsx)(u.default,{href:"/screws",className:"p-2 rounded-full hover:bg-muted text-muted-foreground",children:(0,s.jsx)(o.ArrowLeft,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Assegnazione Componenti"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Trascina i componenti dal magazzino agli asset."})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 flex-1 min-h-0",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("div",{className:"flex-1 flex flex-col rounded-xl border bg-muted/10 overflow-hidden",children:(0,s.jsx)(p,{type:"RETINATO",components:v.filter(e=>"RETINATO"===e.warehouse)})}),(0,s.jsx)("div",{className:"flex-1 flex flex-col rounded-xl border bg-muted/10 overflow-hidden",children:(0,s.jsx)(p,{type:"MAGLIATO",components:v.filter(e=>"MAGLIATO"===e.warehouse)})})]}),(0,s.jsxs)("div",{className:"lg:col-span-2 flex flex-col rounded-xl border bg-muted/10 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b bg-muted/40 font-medium text-sm flex justify-between items-center gap-4",children:[(0,s.jsx)("span",{children:"Linee di Produzione & Asset"}),(0,s.jsxs)("div",{className:"relative w-full max-w-xs",children:[(0,s.jsx)(x.Search,{className:"absolute left-2.5 top-2.5 h-3.5 w-3.5 text-muted-foreground"}),(0,s.jsx)("input",{className:"w-full pl-8 h-8 rounded-md border bg-background px-3 text-xs focus:ring-1 focus:ring-primary outline-none",placeholder:"Cerca asset...",value:g,onChange:e=>j(e.target.value)})]})]}),(0,s.jsx)("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 gap-4 overflow-y-auto",children:b.map(r=>(0,s.jsx)(h,{asset:r,assignedComponents:e.filter(e=>e.assignedAssetId===r.id)},r.id))})]})]})]}),(0,s.jsx)(t.DragOverlay,{children:y?(0,s.jsxs)("div",{className:"p-3 bg-card border border-primary rounded-lg shadow-xl cursor-grabbing flex items-center gap-3 w-64 opacity-90",children:[(0,s.jsx)(n,{className:"h-4 w-4 text-primary"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-sm",children:y.code}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:y.model})]})]}):null})]})}function p({type:e,components:r}){let{setNodeRef:d,isOver:l}=(0,t.useDroppable)({id:e,data:{type:e}});return(0,s.jsxs)("div",{ref:d,className:(0,m.cn)("flex flex-col h-full transition-colors",l?"bg-primary/5":""),children:[(0,s.jsxs)("div",{className:(0,m.cn)("p-3 border-b font-medium text-sm flex justify-between items-center","RETINATO"===e?"bg-amber-50/50 text-amber-900":"bg-blue-50/50 text-blue-900"),children:[(0,s.jsxs)("span",{children:["Magazzino ",e]}),(0,s.jsx)("span",{className:"text-xs bg-white px-2 py-0.5 rounded-full border shadow-sm",children:r.length})]}),(0,s.jsxs)("div",{className:"p-3 flex-1 overflow-y-auto min-h-[200px]",children:[r.map(e=>(0,s.jsx)(f,{component:e},e.id)),0===r.length&&(0,s.jsxs)("div",{className:"h-full flex items-center justify-center text-xs text-muted-foreground italic border-2 border-dashed rounded-lg m-2",children:["Trascina qui per spostare in ",e]})]})]})}e.s(["default",()=>g],34029)}]);