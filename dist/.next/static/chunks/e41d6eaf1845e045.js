(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72664,e=>{"use strict";let t=(0,e.i(75254).default)("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);e.s(["Box",()=>t],72664)},95468,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],95468)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},22097,e=>{"use strict";var t=e.i(43476),s=e.i(67182),a=e.i(81233),i=e.i(45110),l=e.i(81515);function n(e,t){let s=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return s<0?-1:s>0?1:s}var r=e.i(87316),d=e.i(95468),c=e.i(72664);let o=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var m=e.i(71645);function x(){let{schedules:e,generateDueWorkOrders:x}=(0,s.usePM)(),{assets:u}=(0,a.useAssets)(),[h,g]=(0,m.useState)(null);return(0,t.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-foreground to-foreground/60 bg-clip-text text-transparent",children:"Manutenzione Preventiva"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Gestisci le schedulazioni ricorrenti e genera ordini di lavoro."})]}),(0,t.jsxs)("button",{onClick:()=>{g(x()),setTimeout(()=>g(null),3e3)},className:"bg-primary text-primary-foreground px-4 py-2 rounded-lg font-medium shadow-sm hover:shadow-md transition-all flex items-center gap-2",children:[(0,t.jsx)(o,{className:"h-4 w-4"})," Genera Task Scaduti"]})]}),null!==h&&(0,t.jsxs)("div",{className:"bg-emerald-50 text-emerald-600 px-4 py-3 rounded-lg flex items-center gap-2 animate-in slide-in-from-top-2 border border-emerald-100",children:[(0,t.jsx)(d.CheckCircle2,{className:"h-5 w-5"}),(0,t.jsxs)("span",{className:"font-medium",children:["Generati con successo ",h," nuovi ordini di lavoro."]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.map(e=>{let s,a=(s=function(e,t,s){let[a,r]=(0,i.normalizeDates)(void 0,e,t),d=n(a,r),c=Math.abs((0,l.differenceInCalendarDays)(a,r));a.setDate(a.getDate()-d*c);let o=Number(n(a,r)===-d),m=d*(c-o);return 0===m?0:m}(new Date(e.nextDueDate),new Date))<0?{bg:"bg-red-100",text:"text-red-700",label:"Scaduto"}:s<=7?{bg:"bg-amber-100",text:"text-amber-700",label:"In Scadenza"}:{bg:"bg-emerald-100",text:"text-emerald-700",label:"Pianificato"},d=u.find(t=>t.id===e.assetId);return(0,t.jsxs)("div",{className:"rounded-xl border bg-card p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg line-clamp-1",children:e.taskTitle}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[(0,t.jsx)(c.Box,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:d?.name||e.assetName})]})]}),(0,t.jsx)("div",{className:`px-2 py-1 rounded text-xs font-semibold ${a.bg} ${a.text}`,children:a.label})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2 min-h-[40px]",children:e.description}),(0,t.jsxs)("div",{className:"space-y-2 pt-4 border-t text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Frequenza:"}),(0,t.jsxs)("span",{className:"font-medium",children:["Ogni ",e.frequencyDays," giorni"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Ultima Esecuzione:"}),(0,t.jsx)("span",{children:new Date(e.lastRunDate).toLocaleDateString()})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(r.Calendar,{className:"h-3 w-3"})," Scadenza:"]}),(0,t.jsx)("span",{className:`font-mono font-medium ${a.text}`,children:new Date(e.nextDueDate).toLocaleDateString()})]})]})]},e.id)}),0===e.length&&(0,t.jsxs)("div",{className:"col-span-full py-12 text-center text-muted-foreground bg-muted/20 rounded-xl border border-dashed",children:[(0,t.jsx)(r.Calendar,{className:"h-10 w-10 mx-auto mb-3 opacity-20"}),(0,t.jsx)("p",{children:"Nessuna schedulazione definita."})]})]})]})}e.s(["default",()=>x],22097)}]);