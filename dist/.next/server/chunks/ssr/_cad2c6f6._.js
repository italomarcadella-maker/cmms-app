module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},87532,a=>{"use strict";let b=(0,a.i(70106).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],87532)},210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},61347,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(49741),e=a.i(14512),f=a.i(38645),g=a.i(20285),h=a.i(70106);let i=(0,h.default)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),j=(0,h.default)("factory",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var k=a.i(210),l=a.i(87532),m=a.i(97895),n=a.i(38246);function o({component:a}){let{attributes:c,listeners:f,setNodeRef:g,transform:h,isDragging:j}=(0,d.useDraggable)({id:a.id,data:{component:a}}),k={transform:e.CSS.Translate.toString(h),opacity:j?.5:1};return(0,b.jsxs)("div",{ref:g,style:k,...f,...c,className:"p-3 bg-card border rounded-lg shadow-sm mb-2 cursor-grab active:cursor-grabbing hover:border-primary transition-colors flex items-center gap-3 touch-none group",children:[(0,b.jsx)(i,{className:"h-4 w-4 text-muted-foreground group-hover:text-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-sm",children:a.code}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.model})]}),(0,b.jsx)("div",{className:"ml-auto text-xs bg-muted px-1.5 py-0.5 rounded text-muted-foreground",children:"RETINATO"===a.warehouse?"RET":"MAG"})]})}function p({asset:a,assignedComponents:c}){let{setNodeRef:e,isOver:f}=(0,d.useDroppable)({id:a.id,data:{asset:a}});return(0,b.jsxs)("div",{ref:e,className:(0,m.cn)("p-4 rounded-xl border transition-all duration-200",f?"bg-primary/10 border-primary shadow-md scale-[1.02]":"bg-card shadow-sm"),children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,b.jsx)("div",{className:"p-2 bg-muted/50 rounded-lg text-muted-foreground",children:(0,b.jsx)(j,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-sm",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a.line?(0,b.jsx)("span",{className:"font-medium text-primary block mb-0.5",children:a.line}):null,a.model," â€¢ ",a.location]})]})]}),(0,b.jsx)("div",{className:"space-y-2 min-h-[60px] bg-muted/20 rounded-lg p-2 border border-dashed border-transparent",children:0===c.length?(0,b.jsx)("div",{className:"h-full flex items-center justify-center text-xs text-muted-foreground italic",children:"Trascina qui viti/cilindri"}):c.map(a=>(0,b.jsx)(o,{component:a},a.id))})]})}function q(){let{components:a,assignComponent:e,moveWarehouse:h}=(0,f.useComponents)(),{assets:j}=(0,g.useAssets)(),[m,o]=(0,c.useState)(null),[q,s]=(0,c.useState)(""),t=j.filter(a=>a.name.toLowerCase().includes(q.toLowerCase())||a.model.toLowerCase().includes(q.toLowerCase())),u=a.filter(a=>!a.assignedAssetId),v=m?a.find(a=>a.id===m):null;return(0,b.jsxs)(d.DndContext,{onDragStart:a=>{o(a.active.id)},onDragEnd:b=>{let{active:c,over:d}=b;if(!d)return void o(null);let f=c.id,g=d.id;if("RETINATO"===g||"MAGLIATO"===g){e(f,void 0);let b=a.find(a=>a.id===f);b&&h(f,g,b.location)}else if(g!==f){let b=a.find(a=>a.id===f);if(!b)return;let c=a.filter(a=>a.assignedAssetId===g).find(a=>a.type===b.type);c&&e(c.id,void 0),e(f,g)}o(null)},children:[(0,b.jsxs)("div",{className:"space-y-6 h-[calc(100vh-100px)] flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 shrink-0",children:[(0,b.jsx)(n.default,{href:"/screws",className:"p-2 rounded-full hover:bg-muted text-muted-foreground",children:(0,b.jsx)(k.ArrowLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Assegnazione Componenti"}),(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Trascina i componenti dal magazzino agli asset."})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 flex-1 min-h-0",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsx)("div",{className:"flex-1 flex flex-col rounded-xl border bg-muted/10 overflow-hidden",children:(0,b.jsx)(r,{type:"RETINATO",components:u.filter(a=>"RETINATO"===a.warehouse)})}),(0,b.jsx)("div",{className:"flex-1 flex flex-col rounded-xl border bg-muted/10 overflow-hidden",children:(0,b.jsx)(r,{type:"MAGLIATO",components:u.filter(a=>"MAGLIATO"===a.warehouse)})})]}),(0,b.jsxs)("div",{className:"lg:col-span-2 flex flex-col rounded-xl border bg-muted/10 overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-4 border-b bg-muted/40 font-medium text-sm flex justify-between items-center gap-4",children:[(0,b.jsx)("span",{children:"Linee di Produzione & Asset"}),(0,b.jsxs)("div",{className:"relative w-full max-w-xs",children:[(0,b.jsx)(l.Search,{className:"absolute left-2.5 top-2.5 h-3.5 w-3.5 text-muted-foreground"}),(0,b.jsx)("input",{className:"w-full pl-8 h-8 rounded-md border bg-background px-3 text-xs focus:ring-1 focus:ring-primary outline-none",placeholder:"Cerca asset...",value:q,onChange:a=>s(a.target.value)})]})]}),(0,b.jsx)("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 gap-4 overflow-y-auto",children:t.map(c=>(0,b.jsx)(p,{asset:c,assignedComponents:a.filter(a=>a.assignedAssetId===c.id)},c.id))})]})]})]}),(0,b.jsx)(d.DragOverlay,{children:v?(0,b.jsxs)("div",{className:"p-3 bg-card border border-primary rounded-lg shadow-xl cursor-grabbing flex items-center gap-3 w-64 opacity-90",children:[(0,b.jsx)(i,{className:"h-4 w-4 text-primary"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-sm",children:v.code}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:v.model})]})]}):null})]})}function r({type:a,components:c}){let{setNodeRef:e,isOver:f}=(0,d.useDroppable)({id:a,data:{type:a}});return(0,b.jsxs)("div",{ref:e,className:(0,m.cn)("flex flex-col h-full transition-colors",f?"bg-primary/5":""),children:[(0,b.jsxs)("div",{className:(0,m.cn)("p-3 border-b font-medium text-sm flex justify-between items-center","RETINATO"===a?"bg-amber-50/50 text-amber-900":"bg-blue-50/50 text-blue-900"),children:[(0,b.jsxs)("span",{children:["Magazzino ",a]}),(0,b.jsx)("span",{className:"text-xs bg-white px-2 py-0.5 rounded-full border shadow-sm",children:c.length})]}),(0,b.jsxs)("div",{className:"p-3 flex-1 overflow-y-auto min-h-[200px]",children:[c.map(a=>(0,b.jsx)(o,{component:a},a.id)),0===c.length&&(0,b.jsxs)("div",{className:"h-full flex items-center justify-center text-xs text-muted-foreground italic border-2 border-dashed rounded-lg m-2",children:["Trascina qui per spostare in ",a]})]})]})}a.s(["default",()=>q],61347)}];

//# sourceMappingURL=_cad2c6f6._.js.map