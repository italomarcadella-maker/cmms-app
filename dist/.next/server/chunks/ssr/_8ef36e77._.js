module.exports=[80032,a=>{"use strict";let b=(0,a.i(70106).default)("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);a.s(["Box",()=>b],80032)},67453,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],67453)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},45546,a=>{"use strict";var b=a.i(87924),c=a.i(2439),d=a.i(20285),e=a.i(57270),f=a.i(87685);function g(a,b){let c=a.getFullYear()-b.getFullYear()||a.getMonth()-b.getMonth()||a.getDate()-b.getDate()||a.getHours()-b.getHours()||a.getMinutes()-b.getMinutes()||a.getSeconds()-b.getSeconds()||a.getMilliseconds()-b.getMilliseconds();return c<0?-1:c>0?1:c}var h=a.i(41675),i=a.i(67453),j=a.i(80032);let k=(0,a.i(70106).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var l=a.i(72131);function m(){let{schedules:a,generateDueWorkOrders:m}=(0,c.usePM)(),{assets:n}=(0,d.useAssets)(),[o,p]=(0,l.useState)(null);return(0,b.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-foreground to-foreground/60 bg-clip-text text-transparent",children:"Manutenzione Preventiva"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Gestisci le schedulazioni ricorrenti e genera ordini di lavoro."})]}),(0,b.jsxs)("button",{onClick:()=>{p(m()),setTimeout(()=>p(null),3e3)},className:"bg-primary text-primary-foreground px-4 py-2 rounded-lg font-medium shadow-sm hover:shadow-md transition-all flex items-center gap-2",children:[(0,b.jsx)(k,{className:"h-4 w-4"})," Genera Task Scaduti"]})]}),null!==o&&(0,b.jsxs)("div",{className:"bg-emerald-50 text-emerald-600 px-4 py-3 rounded-lg flex items-center gap-2 animate-in slide-in-from-top-2 border border-emerald-100",children:[(0,b.jsx)(i.CheckCircle2,{className:"h-5 w-5"}),(0,b.jsxs)("span",{className:"font-medium",children:["Generati con successo ",o," nuovi ordini di lavoro."]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.map(a=>{let c,d=(c=function(a,b,c){let[d,h]=(0,e.normalizeDates)(void 0,a,b),i=g(d,h),j=Math.abs((0,f.differenceInCalendarDays)(d,h));d.setDate(d.getDate()-i*j);let k=Number(g(d,h)===-i),l=i*(j-k);return 0===l?0:l}(new Date(a.nextDueDate),new Date))<0?{bg:"bg-red-100",text:"text-red-700",label:"Scaduto"}:c<=7?{bg:"bg-amber-100",text:"text-amber-700",label:"In Scadenza"}:{bg:"bg-emerald-100",text:"text-emerald-700",label:"Pianificato"},i=n.find(b=>b.id===a.assetId);return(0,b.jsxs)("div",{className:"rounded-xl border bg-card p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-lg line-clamp-1",children:a.taskTitle}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mt-1",children:[(0,b.jsx)(j.Box,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:i?.name||a.assetName})]})]}),(0,b.jsx)("div",{className:`px-2 py-1 rounded text-xs font-semibold ${d.bg} ${d.text}`,children:d.label})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2 min-h-[40px]",children:a.description}),(0,b.jsxs)("div",{className:"space-y-2 pt-4 border-t text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Frequenza:"}),(0,b.jsxs)("span",{className:"font-medium",children:["Ogni ",a.frequencyDays," giorni"]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Ultima Esecuzione:"}),(0,b.jsx)("span",{children:new Date(a.lastRunDate).toLocaleDateString()})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("span",{className:"text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(h.Calendar,{className:"h-3 w-3"})," Scadenza:"]}),(0,b.jsx)("span",{className:`font-mono font-medium ${d.text}`,children:new Date(a.nextDueDate).toLocaleDateString()})]})]})]},a.id)}),0===a.length&&(0,b.jsxs)("div",{className:"col-span-full py-12 text-center text-muted-foreground bg-muted/20 rounded-xl border border-dashed",children:[(0,b.jsx)(h.Calendar,{className:"h-10 w-10 mx-auto mb-3 opacity-20"}),(0,b.jsx)("p",{children:"Nessuna schedulazione definita."})]})]})]})}a.s(["default",()=>m],45546)}];

//# sourceMappingURL=_8ef36e77._.js.map