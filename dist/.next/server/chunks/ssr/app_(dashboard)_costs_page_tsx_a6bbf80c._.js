module.exports=[20708,a=>{"use strict";var b=a.i(87924),c=a.i(32674),d=a.i(20285),e=a.i(18155),f=a.i(23665),g=a.i(58042),h=a.i(94222),i=a.i(54419),j=a.i(59854),k=a.i(2274),l=a.i(48662),m=a.i(72131),n=a.i(554),o=a.i(31760),p=["axis"],q=(0,m.forwardRef)((a,b)=>m.createElement(o.CartesianChart,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:p,tooltipPayloadSearcher:n.arrayTooltipSearcher,categoricalChartProps:a,ref:b})),r=m,s=a.i(98621),t=a.i(88949),u=a.i(36319),v=a.i(71555),w=a.i(68932),x=a.i(37082),y=a.i(56295),z=a.i(53242),A=a.i(12791),B=a.i(83663),C=a.i(17913),D=a.i(98382),E=a.i(25392),F=a.i(44381),G=a.i(98563),H=a.i(12168),I=(a,b,c,d)=>(0,H.selectAxisWithScale)(a,"xAxis",b,d),J=(a,b,c,d)=>(0,H.selectTicksOfGraphicalItem)(a,"xAxis",b,d),K=(a,b,c,d)=>(0,H.selectAxisWithScale)(a,"yAxis",c,d),L=(a,b,c,d)=>(0,H.selectTicksOfGraphicalItem)(a,"yAxis",c,d),M=(0,F.createSelector)([D.selectChartLayout,I,K,J,L],(a,b,c,d,e)=>(0,y.isCategoricalAxis)(a,"xAxis")?(0,y.getBandSizeOfAxis)(b,d,!1):(0,y.getBandSizeOfAxis)(c,e,!1));function N(a){return"line"===a.type}var O=(0,F.createSelector)([H.selectUnfilteredCartesianItems,(a,b,c,d,e)=>e],(a,b)=>a.filter(N).find(a=>a.id===b)),P=(0,F.createSelector)([D.selectChartLayout,I,K,J,L,O,M,G.selectChartDataWithIndexesIfNotInPanoramaPosition4],(a,b,c,d,e,f,g,h)=>{var i,{chartData:j,dataStartIndex:k,dataEndIndex:l}=h;if(null!=f&&null!=b&&null!=c&&null!=d&&null!=e&&0!==d.length&&0!==e.length&&null!=g&&("horizontal"===a||"vertical"===a)){var{dataKey:m,data:n}=f;if(null!=(i=null!=n&&n.length>0?n:null==j?void 0:j.slice(k,l+1)))return function(a){var{layout:b,xAxis:c,yAxis:d,xAxisTicks:e,yAxisTicks:f,dataKey:g,bandSize:h,displayedData:i}=a;return i.map((a,i)=>{var j=(0,y.getValueByDataKey)(a,g);if("horizontal"===b)return{x:(0,y.getCateCoordinateOfLine)({axis:c,ticks:e,bandSize:h,entry:a,index:i}),y:(0,w.isNullish)(j)?null:d.scale(j),value:j,payload:a};var k=(0,w.isNullish)(j)?null:c.scale(j),l=(0,y.getCateCoordinateOfLine)({axis:d,ticks:f,bandSize:h,entry:a,index:i});return null==k||null==l?null:{x:k,y:l,value:j,payload:a}}).filter(Boolean)}({layout:a,xAxis:b,yAxis:c,xAxisTicks:d,yAxisTicks:e,dataKey:m,bandSize:g,displayedData:i})}}),Q=a.i(77368),R=a.i(92430),S=a.i(62320),T=a.i(87293),U=a.i(36745),V=a.i(46780),W=a.i(77025),X=a.i(72853),Y=a.i(76342),Z=a.i(7038),$=a.i(10576),_=a.i(56998),aa=a.i(96268),ab=a.i(31080),ac=a.i(95272),ad=["id"],ae=["type","layout","connectNulls","needClip","shape"],af=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function ag(){return(ag=Object.assign.bind()).apply(null,arguments)}function ah(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function ai(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?ah(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):ah(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function aj(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}var ak=r.memo(a=>{var{dataKey:b,data:c,stroke:d,strokeWidth:e,fill:f,name:g,hide:h,unit:i,tooltipType:j,id:k}=a,l={dataDefinedOnItem:c,positions:void 0,settings:{stroke:d,strokeWidth:e,fill:f,dataKey:b,nameKey:void 0,name:(0,y.getTooltipNameProp)(g,b),hide:h,type:j,color:d,unit:i,graphicalItemId:k}};return r.createElement(A.SetTooltipEntrySettings,{tooltipEntrySettings:l})}),al=(a,b)=>"".concat(b,"px ").concat(a-b,"px");function am(a){var{clipPathId:b,points:c,props:d}=a,{dot:e,dataKey:f,needClip:g}=d,{id:h}=d,i=aj(d,ad),j=(0,X.svgPropertiesNoEvents)(i);return r.createElement(v.Dots,{points:c,dot:e,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:f,baseProps:j,needClip:g,clipPathId:b})}function an(a){var{showLabels:b,children:c,points:d}=a,e=(0,r.useMemo)(()=>null==d?void 0:d.map(a=>{var b,c,d={x:null!=(b=a.x)?b:0,y:null!=(c=a.y)?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ai(ai({},d),{},{value:a.value,payload:a.payload,viewBox:d,parentViewBox:void 0,fill:void 0})}),[d]);return r.createElement(u.CartesianLabelListContextProvider,{value:b?e:void 0},c)}function ao(a){var{clipPathId:b,pathRef:c,points:d,strokeDasharray:e,props:f}=a,{type:g,layout:h,connectNulls:i,needClip:j,shape:k}=f,l=aj(f,ae),m=ai(ai({},(0,Z.svgPropertiesAndEvents)(l)),{},{fill:"none",className:"recharts-line-curve",clipPath:j?"url(#clipPath-".concat(b,")"):void 0,points:d,type:g,layout:h,connectNulls:i,strokeDasharray:null!=e?e:f.strokeDasharray});return r.createElement(r.Fragment,null,(null==d?void 0:d.length)>1&&r.createElement(_.Shape,ag({shapeType:"curve",option:k},m,{pathRef:c})),r.createElement(am,{points:d,clipPathId:b,props:f}))}function ap(a){var{clipPathId:b,props:c,pathRef:d,previousPointsRef:e,longestAnimatedLengthRef:f}=a,{points:g,strokeDasharray:h,isAnimationActive:i,animationBegin:j,animationDuration:k,animationEasing:l,animateNewValues:m,width:n,height:o,onAnimationEnd:p,onAnimationStart:q}=c,s=e.current,t=(0,S.useAnimationId)(g,"recharts-line-"),v=(0,r.useRef)(t),[x,y]=(0,r.useState)(!1),z=(0,r.useCallback)(()=>{"function"==typeof p&&p(),y(!1)},[p]),A=(0,r.useCallback)(()=>{"function"==typeof q&&q(),y(!0)},[q]),B=function(a){try{return a&&a.getTotalLength&&a.getTotalLength()||0}catch(a){return 0}}(d.current),C=(0,r.useRef)(0);v.current!==t&&(C.current=f.current,v.current=t);var D=C.current;return r.createElement(an,{points:g,showLabels:!x},c.children,r.createElement(Y.JavascriptAnimate,{animationId:t,begin:j,duration:k,isActive:i,easing:l,onAnimationEnd:z,onAnimationStart:A,key:t},a=>{var j,k=Math.min((0,w.interpolate)(D,B+D,a),B);if(j=i?h?((a,b,c)=>{var d=c.reduce((a,b)=>a+b);if(!d)return al(b,a);for(var e=Math.floor(a/d),f=a%d,g=b-a,h=[],i=0,j=0;i<c.length;j+=c[i],++i)if(j+c[i]>f){h=[...c.slice(0,i),f-j];break}var k=h.length%2==0?[0,g]:[g];return[...function(a,b){for(var c=a.length%2!=0?[...a,0]:a,d=[],e=0;e<b;++e)d=[...d,...c];return d}(c,e),...h,...k].map(a=>"".concat(a,"px")).join(", ")})(k,B,"".concat(h).split(/[,\s]+/gim).map(a=>parseFloat(a))):al(B,k):null==h?void 0:String(h),a>0&&B>0&&(e.current=g,f.current=Math.max(f.current,k)),s){var l=s.length/g.length,p=1===a?g:g.map((b,c)=>{var d=Math.floor(c*l);if(s[d]){var e=s[d];return ai(ai({},b),{},{x:(0,w.interpolate)(e.x,b.x,a),y:(0,w.interpolate)(e.y,b.y,a)})}return m?ai(ai({},b),{},{x:(0,w.interpolate)(2*n,b.x,a),y:(0,w.interpolate)(o/2,b.y,a)}):ai(ai({},b),{},{x:b.x,y:b.y})});return e.current=p,r.createElement(ao,{props:c,points:p,clipPathId:b,pathRef:d,strokeDasharray:j})}return r.createElement(ao,{props:c,points:g,clipPathId:b,pathRef:d,strokeDasharray:j})}),r.createElement(u.LabelListFromLabelProp,{label:c.label}))}function aq(a){var{clipPathId:b,props:c}=a,d=(0,r.useRef)(null),e=(0,r.useRef)(0),f=(0,r.useRef)(null);return r.createElement(ap,{props:c,clipPathId:b,previousPointsRef:d,longestAnimatedLengthRef:e,pathRef:f})}var ar=(a,b)=>{var c,d;return{x:null!=(c=a.x)?c:void 0,y:null!=(d=a.y)?d:void 0,value:a.value,errorVal:(0,y.getValueByDataKey)(a.payload,b)}};class as extends r.Component{render(){var{hide:a,dot:b,points:c,className:d,xAxisId:e,yAxisId:f,top:g,left:h,width:i,height:j,id:k,needClip:l,zIndex:m}=this.props;if(a)return null;var n=(0,s.clsx)("recharts-line",d),{r:o,strokeWidth:p}=(0,$.getRadiusAndStrokeWidthFromDot)(b),q=(0,x.isClipDot)(b),u=2*o+p,v=l?"url(#clipPath-".concat(q?"":"dots-").concat(k,")"):void 0;return r.createElement(aa.ZIndexLayer,{zIndex:m},r.createElement(t.Layer,{className:n},l&&r.createElement("defs",null,r.createElement(C.GraphicalItemClipPath,{clipPathId:k,xAxisId:e,yAxisId:f}),!q&&r.createElement("clipPath",{id:"clipPath-dots-".concat(k)},r.createElement("rect",{x:h-u/2,y:g-u/2,width:i+u,height:j+u}))),r.createElement(B.SetErrorBarContext,{xAxisId:e,yAxisId:f,data:c,dataPointFormatter:ar,errorBarOffset:0},r.createElement(aq,{props:this.props,clipPathId:k}))),r.createElement(z.ActivePoints,{activeDot:this.props.activeDot,points:c,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:v}))}}var at={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ab.DefaultZIndexes.line,type:"linear"};function au(a){var b=(0,T.resolveDefaultProps)(a,at),{activeDot:c,animateNewValues:d,animationBegin:e,animationDuration:f,animationEasing:g,connectNulls:h,dot:i,hide:j,isAnimationActive:k,label:l,legendType:m,xAxisId:n,yAxisId:o,id:p}=b,q=aj(b,af),{needClip:s}=(0,C.useNeedsClip)(n,o),t=(0,U.usePlotArea)(),u=(0,D.useChartLayout)(),v=(0,E.useIsPanorama)(),w=(0,Q.useAppSelector)(a=>P(a,n,o,v,p));if("horizontal"!==u&&"vertical"!==u||null==w||null==t)return null;var{height:x,width:y,x:z,y:A}=t;return r.createElement(as,ag({},q,{id:p,connectNulls:h,dot:i,activeDot:c,animateNewValues:d,animationBegin:e,animationDuration:f,animationEasing:g,isAnimationActive:k,hide:j,label:l,legendType:m,xAxisId:n,yAxisId:o,points:w,layout:u,height:x,width:y,left:z,top:A,needClip:s}))}var av=r.memo(function(a){var b=(0,T.resolveDefaultProps)(a,at),c=(0,E.useIsPanorama)();return r.createElement(V.RegisterGraphicalItemId,{id:b.id,type:"line"},a=>r.createElement(r.Fragment,null,r.createElement(R.SetLegendPayload,{legendPayload:(a=>{var{dataKey:b,name:c,stroke:d,legendType:e,hide:f}=a;return[{inactive:f,dataKey:b,type:e,color:d,value:(0,y.getTooltipNameProp)(c,b),payload:a}]})(b)}),r.createElement(ak,{dataKey:b.dataKey,data:b.data,stroke:b.stroke,strokeWidth:b.strokeWidth,fill:b.fill,name:b.name,hide:b.hide,unit:b.unit,tooltipType:b.tooltipType,id:a}),r.createElement(W.SetCartesianGraphicalItem,{type:"line",id:a,data:b.data,xAxisId:b.xAxisId,yAxisId:b.yAxisId,zAxisId:0,dataKey:b.dataKey,hide:b.hide,isPanorama:c}),r.createElement(au,ag({},b,{id:a}))))},ac.propsAreEqual);av.displayName="Line";var aw=a.i(336),ax=a.i(24669),ay=a.i(70106);let az=(0,ay.default)("hammer",[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]]),aA=(0,ay.default)("component",[["path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",key:"1uwlt4"}],["path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z",key:"10291m"}],["path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z",key:"1tqoq1"}],["path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",key:"1x6lto"}]]);var aB=a.i(97895),aC=a.i(56711),aD=a.i(68465),aE=a.i(82884),aF=a.i(28386);function aG(){let{workOrders:a}=(0,c.useWorkOrders)(),{assets:m}=(0,d.useAssets)(),n=a.reduce((a,b)=>a+(b.laborLogs||[]).reduce((a,b)=>a+b.hours,0),0),o=45*n,p=120*a.filter(a=>"COMPLETED"===a.status).length,r=o+p,s=m.map(b=>{let c=a.filter(a=>a.assetId===b.id),d=c.reduce((a,b)=>a+(b.laborLogs||[]).reduce((a,b)=>a+b.hours,0),0),e=120*c.filter(a=>"COMPLETED"===a.status).length;return{name:b.name,total:45*d+e,labor:45*d,parts:e}}).sort((a,b)=>b.total-a.total).slice(0,5),t=Array.from({length:6}).map((b,c)=>{let d=(0,aD.subMonths)(new Date,5-c),e=(0,aC.format)(d,"MMM",{locale:aF.it}),f=a.filter(a=>(0,aE.isSameMonth)(new Date(a.createdAt),d));return{name:e,cost:Math.round(45*(f.reduce((a,b)=>a+(b.laborLogs||[]).reduce((a,b)=>a+b.hours,0),0)+20*Math.random())+(120*f.length+500*Math.random()))}});return(0,b.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-foreground to-foreground/60 bg-clip-text text-transparent",children:"Analisi Costi"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Monitoraggio spese di manutenzione, manodopera e ricambi."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(aH,{title:"Costo Totale",value:`€ ${r.toLocaleString()}`,icon:aw.Euro,trend:"+5% vs mese scorso",color:"text-emerald-600"}),(0,b.jsx)(aH,{title:"Manodopera",value:`€ ${o.toLocaleString()}`,icon:az,sub:`${n} ore totali`,color:"text-blue-600"}),(0,b.jsx)(aH,{title:"Ricambi",value:`€ ${p.toLocaleString()}`,icon:aA,sub:"Stima su interventi chiusi",color:"text-amber-600"}),(0,b.jsx)(aH,{title:"Costo Medio / Asset",value:`€ ${Math.round(r/(m.length||1)).toLocaleString()}`,icon:ax.TrendingUp,color:"text-purple-600"})]}),(0,b.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-card border rounded-xl shadow-sm p-6",children:[(0,b.jsx)("h3",{className:"font-semibold mb-6",children:"Top 5 Asset per Costo Manutenzione"}),(0,b.jsx)("div",{className:"h-[300px] w-full",children:(0,b.jsx)(l.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(e.BarChart,{data:s,layout:"vertical",margin:{left:40},children:[(0,b.jsx)(i.CartesianGrid,{strokeDasharray:"3 3",horizontal:!1}),(0,b.jsx)(g.XAxis,{type:"number",unit:"€",hide:!0}),(0,b.jsx)(h.YAxis,{dataKey:"name",type:"category",width:100,tick:{fontSize:12}}),(0,b.jsx)(j.Tooltip,{formatter:a=>`€ ${a}`,cursor:{fill:"transparent"}}),(0,b.jsx)(k.Legend,{}),(0,b.jsx)(f.Bar,{dataKey:"labor",name:"Manodopera",stackId:"a",fill:"#3b82f6",radius:[0,4,4,0],barSize:20}),(0,b.jsx)(f.Bar,{dataKey:"parts",name:"Ricambi",stackId:"a",fill:"#f59e0b",radius:[0,4,4,0],barSize:20})]})})})]}),(0,b.jsxs)("div",{className:"bg-card border rounded-xl shadow-sm p-6",children:[(0,b.jsx)("h3",{className:"font-semibold mb-6",children:"Andamento Spese (Semestrale)"}),(0,b.jsx)("div",{className:"h-[300px] w-full",children:(0,b.jsx)(l.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(q,{data:t,children:[(0,b.jsx)(i.CartesianGrid,{strokeDasharray:"3 3",vertical:!1}),(0,b.jsx)(g.XAxis,{dataKey:"name"}),(0,b.jsx)(h.YAxis,{}),(0,b.jsx)(j.Tooltip,{formatter:a=>`€ ${a}`}),(0,b.jsx)(av,{type:"monotone",dataKey:"cost",stroke:"#10b981",strokeWidth:3,dot:{r:4},activeDot:{r:6}})]})})})]})]})]})}function aH({title:a,value:c,icon:d,sub:e,trend:f,color:g}){return(0,b.jsxs)("div",{className:"p-4 rounded-xl border bg-card shadow-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:a}),(0,b.jsx)("h3",{className:"text-2xl font-bold mt-1",children:c})]}),(0,b.jsx)("div",{className:(0,aB.cn)("p-2 rounded-lg bg-muted/50",g),children:(0,b.jsx)(d,{className:"h-5 w-5"})})]}),(e||f)&&(0,b.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground flex gap-2",children:[f&&(0,b.jsx)("span",{className:"text-emerald-600 font-medium",children:f}),e&&(0,b.jsx)("span",{children:e})]})]})}a.s(["default",()=>aG],20708)}];

//# sourceMappingURL=app_%28dashboard%29_costs_page_tsx_a6bbf80c._.js.map