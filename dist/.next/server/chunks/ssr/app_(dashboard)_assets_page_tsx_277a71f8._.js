module.exports=[9948,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(15618),f=a.i(87532),g=a.i(80032),h=a.i(70106);let i=(0,h.default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),j=(0,h.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var k=a.i(20285),l=a.i(99018),m=a.i(96221),n=a.i(33508);function o({isOpen:a,onClose:d,asset:e,onSave:f}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(e);(0,c.useEffect)(()=>{j(e)},[e]);let k=a=>{let{name:b,value:c}=a.target;j(a=>({...a,[b]:c}))},l=async a=>{a.preventDefault(),h(!0),await new Promise(a=>setTimeout(a,1e3)),f({...i,id:i.id||`AST-${Math.floor(1e4*Math.random())}`,location:i.location||i.plant||"N/A"}),h(!1),d()};return a?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:(0,b.jsxs)("div",{className:"relative w-full max-w-2xl rounded-lg border bg-background p-6 shadow-lg animate-in zoom-in-95 duration-200",children:[(0,b.jsxs)("div",{className:"flex flex-col space-y-1.5 text-center sm:text-left mb-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold leading-none tracking-tight",children:e.id?"Modifica Asset":"Nuovo Asset"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Inserisci i dettagli del macchinario qui sotto. Clicca salva quando hai finito."})]}),(0,b.jsxs)("button",{onClick:d,className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:[(0,b.jsx)(n.X,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"sr-only",children:"Close"})]}),(0,b.jsxs)("form",{onSubmit:l,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"name",className:"text-sm font-medium",children:"Nome Asset"}),(0,b.jsx)("input",{id:"name",name:"name",value:i.name||"",onChange:k,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,placeholder:"es. Pressa Idraulica"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"model",className:"text-sm font-medium",children:"Modello"}),(0,b.jsx)("input",{id:"model",name:"model",value:i.model||"",onChange:k,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,placeholder:"es. X-2000"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"serialNumber",className:"text-sm font-medium",children:"Seriale"}),(0,b.jsx)("input",{id:"serialNumber",name:"serialNumber",value:i.serialNumber||"",onChange:k,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,placeholder:"es. SN-123456"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"vendor",className:"text-sm font-medium",children:"Costruttore"}),(0,b.jsx)("input",{id:"vendor",name:"vendor",value:i.vendor||"",onChange:k,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,placeholder:"es. Acme Corp"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"plant",className:"text-sm font-medium",children:"Stabilimento"}),(0,b.jsx)("input",{id:"plant",name:"plant",value:i.plant||"",onChange:k,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,placeholder:"es. Stabilimento A"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"department",className:"text-sm font-medium",children:"Reparto"}),(0,b.jsx)("input",{id:"department",name:"department",value:i.department||"",onChange:k,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,placeholder:"es. Produzione"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"line",className:"text-sm font-medium",children:"Linea"}),(0,b.jsx)("input",{id:"line",name:"line",value:i.line||"",onChange:k,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"es. Linea Assemblaggio 1"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"cespite",className:"text-sm font-medium",children:"Cespite"}),(0,b.jsx)("input",{id:"cespite",name:"cespite",value:i.cespite||"",onChange:k,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"es. CSP-2024-001"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"status",className:"text-sm font-medium",children:"Stato"}),(0,b.jsxs)("select",{id:"status",name:"status",value:i.status||"OPERATIONAL",onChange:a=>j(b=>({...b,status:a.target.value})),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:[(0,b.jsx)("option",{value:"OPERATIONAL",children:"In Uso (Operational)"}),(0,b.jsx)("option",{value:"MAINTENANCE",children:"In Manutenzione"}),(0,b.jsx)("option",{value:"STORAGE",children:"Accantonato"}),(0,b.jsx)("option",{value:"DECOMMISSIONED",children:"Rottamato"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{htmlFor:"healthScore",className:"text-sm font-medium",children:"Health Score (0-100)"}),(0,b.jsx)("input",{type:"number",id:"healthScore",name:"healthScore",min:"0",max:"100",value:i.healthScore,onChange:k,className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",children:[(0,b.jsx)("button",{type:"button",onClick:d,className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 mt-2 sm:mt-0",children:"Annulla"}),(0,b.jsxs)("button",{type:"submit",disabled:g,className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2",children:[g&&(0,b.jsx)(m.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Salva"]})]})]})]})}):null}var p=a.i(73320),q=a.i(4720),r=a.i(33441),s=a.i(92e3);function t(){let{addAsset:a}=(0,k.useAssets)(),[d,e]=(0,c.useState)(!1),[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)([]),[j,l]=(0,c.useState)("");return d?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in",children:(0,b.jsxs)("div",{className:"w-full max-w-2xl bg-card rounded-xl shadow-xl border animate-in zoom-in-95 flex flex-col max-h-[90vh]",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b shrink-0",children:[(0,b.jsxs)("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[(0,b.jsx)(q.FileText,{className:"h-5 w-5 text-primary"})," Importazione Massiva Asset"]}),(0,b.jsx)("button",{onClick:()=>e(!1),className:"p-1 hover:bg-muted rounded text-muted-foreground",children:(0,b.jsx)(n.X,{className:"h-5 w-5"})})]}),(0,b.jsxs)("div",{className:"p-6 overflow-y-auto flex-1 space-y-4",children:[(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-100 p-3 rounded-lg text-sm text-blue-800 flex gap-2",children:[(0,b.jsx)("div",{className:"shrink-0",children:(0,b.jsx)(s.AlertCircle,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:"Formato supportato (CSV):"}),(0,b.jsx)("p",{className:"font-mono text-xs mt-1",children:"Nome, Modello, Seriale, Costruttore, Ubicazione"}),(0,b.jsx)("p",{className:"mt-1 opacity-80",children:"Copia e incolla le righe dal tuo file Excel qui sotto."})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("textarea",{className:"w-full h-32 rounded-md border bg-background p-3 text-sm font-mono focus:ring-2 focus:ring-primary outline-none resize-none",placeholder:"Estrusore A, EXT-2000, SN-9988, Bausano, Linea 1\nMulino, GR-500, SN-1122, Tria, Reparto Macinazione",value:f,onChange:a=>g(a.target.value)}),(0,b.jsx)("button",{onClick:()=>{if(l(""),f.trim())try{let a=f.trim().split("\n").map(a=>{let b=a.split(",");return b.length<2?null:{name:b[0]?.trim(),model:b[1]?.trim()||"N/A",serialNumber:b[2]?.trim()||`SN-${Math.floor(1e4*Math.random())}`,vendor:b[3]?.trim()||"Unknown",location:b[4]?.trim()||"Main Plant",status:"OPERATIONAL",healthScore:100,purchaseDate:new Date().toISOString().split("T")[0],plant:"Main Plant",department:"Production",line:"Line 1"}}).filter(Boolean);0===a.length?l("Nessun dato valido trovato. Usa il formato: Nome, Modello, Seriale, Costruttore, Ubicazione"):i(a)}catch(a){l("Errore durante il parsing del testo.")}},className:"text-sm text-primary hover:underline font-medium",children:"Anteprima Dati"})]}),j&&(0,b.jsx)("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded border border-red-100",children:j}),h.length>0&&(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,b.jsx)("thead",{className:"bg-muted text-muted-foreground text-xs uppercase",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-3 py-2",children:"Nome"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"Modello"}),(0,b.jsx)("th",{className:"px-3 py-2",children:"Costruttore"})]})}),(0,b.jsx)("tbody",{className:"divide-y",children:h.map((a,c)=>(0,b.jsxs)("tr",{className:"bg-card",children:[(0,b.jsx)("td",{className:"px-3 py-2 font-medium",children:a.name}),(0,b.jsx)("td",{className:"px-3 py-2",children:a.model}),(0,b.jsx)("td",{className:"px-3 py-2 text-muted-foreground",children:a.vendor})]},c))})]})})]}),(0,b.jsxs)("div",{className:"p-4 border-t bg-muted/20 flex justify-end gap-2 shrink-0",children:[(0,b.jsx)("button",{onClick:()=>e(!1),className:"px-4 py-2 text-sm font-medium hover:bg-muted rounded-md",children:"Annulla"}),(0,b.jsxs)("button",{onClick:()=>{h.forEach(b=>{a(b)}),e(!1),g(""),i([])},disabled:0===h.length,className:"inline-flex items-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-md text-sm font-medium hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)(r.Check,{className:"h-4 w-4"})," Importa ",h.length," Asset"]})]})]})}):(0,b.jsxs)("button",{onClick:()=>e(!0),className:"flex items-center gap-2 bg-secondary text-secondary-foreground px-4 py-2 rounded-lg font-medium shadow-sm hover:bg-secondary/80 transition-all hover:-translate-y-0.5 border",children:[(0,b.jsx)(p.Upload,{className:"h-4 w-4"})," Importa Excel"]})}function u(){let a=(0,d.useRouter)(),{assets:h,addAsset:m,updateAsset:n}=(0,k.useAssets)(),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)([]),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),y={name:"",model:"",serialNumber:"",vendor:"",plant:"Main Plant",department:"",location:"",purchaseDate:"",status:"OPERATIONAL",healthScore:100,lastMaintenance:"",line:"",cespite:""};return(0,c.useEffect)(()=>{if(!h)return;let a=p.toLowerCase();s(h.filter(b=>b.name.toLowerCase().includes(a)||b.model.toLowerCase().includes(a)||b.serialNumber.toLowerCase().includes(a)||b.location.toLowerCase().includes(a)))},[p,h]),(0,b.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-foreground to-foreground/60 bg-clip-text text-transparent",children:"Asset (Macchinari)"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Gestisci attrezzature e macchinari."})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(t,{}),(0,b.jsxs)("button",{onClick:()=>{x(y),v(!0)},className:"flex items-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg font-medium shadow-sm hover:shadow-md transition-all hover:-translate-y-0.5",children:[(0,b.jsx)(e.Plus,{className:"h-4 w-4"})," Nuovo Asset"]})]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(f.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,b.jsx)("input",{type:"text",placeholder:"Cerca asset...",className:"pl-9 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",value:p,onChange:a=>q(a.target.value)})]}),(0,b.jsx)("div",{className:"rounded-xl border bg-card shadow-sm overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,b.jsx)("thead",{className:"bg-muted/50 text-muted-foreground font-medium border-b",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3",children:"Nome Asset"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Dettagli"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Ubicazione"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Info Aggiuntive"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Stato"}),(0,b.jsx)("th",{className:"px-4 py-3",children:"Salute"}),(0,b.jsx)("th",{className:"px-4 py-3 w-[50px]"})]})}),(0,b.jsx)("tbody",{className:"divide-y",children:0===r.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"px-4 py-8 text-center text-muted-foreground italic",children:"Nessun asset trovato."})}):r.map(c=>(0,b.jsxs)("tr",{onClick:()=>a.push(`/assets/${c.id}`),className:"group hover:bg-muted/30 transition-colors cursor-pointer",children:[(0,b.jsx)("td",{className:"px-4 py-3 font-medium",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-8 w-8 rounded bg-muted flex items-center justify-center text-muted-foreground group-hover:bg-background group-hover:text-primary transition-colors border",children:(0,b.jsx)(g.Box,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold text-foreground",children:c.name}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground font-mono",children:c.id})]})]})}),(0,b.jsx)("td",{className:"px-4 py-3 text-muted-foreground",children:(0,b.jsxs)("div",{className:"flex flex-col text-xs",children:[(0,b.jsxs)("span",{children:["Mod: ",c.model]}),(0,b.jsxs)("span",{className:"font-mono",children:["SN: ",c.serialNumber]})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex flex-col text-xs",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[(0,b.jsx)(i,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:c.location})]}),(0,b.jsx)("span",{className:"text-muted-foreground pl-4.5",children:c.plant})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex flex-col text-xs text-muted-foreground",children:[c.department&&(0,b.jsxs)("span",{children:["Dip: ",c.department]}),c.line&&(0,b.jsxs)("span",{children:["Linea: ",c.line]}),c.cespite&&(0,b.jsxs)("span",{className:"font-mono",children:["Cesp: ",c.cespite]})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)(l.AssetStatusBadge,{status:c.status})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-1.5 w-16 bg-muted rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:`h-full rounded-full ${c.healthScore>80?"bg-emerald-500":c.healthScore>50?"bg-amber-500":"bg-red-500"}`,style:{width:`${c.healthScore}%`}})}),(0,b.jsxs)("span",{className:"text-xs font-medium",children:[c.healthScore,"%"]})]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),x(c),v(!0)},className:"p-2 hover:bg-background rounded-full text-muted-foreground hover:text-primary shadow-sm border border-transparent hover:border-border transition-all",children:(0,b.jsx)(j,{className:"h-4 w-4"})})})]},c.id))})]})})}),(0,b.jsx)(o,{isOpen:u,onClose:()=>v(!1),asset:w||y,onSave:a=>{a.id&&h.some(b=>b.id===a.id)?n(a.id,a):m(a),v(!1),x(null)}})]})}a.s(["default",()=>u],9948)}];

//# sourceMappingURL=app_%28dashboard%29_assets_page_tsx_277a71f8._.js.map